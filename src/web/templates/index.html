<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="viewport", content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/style.css">
    <script
      src="https://kit.fontawesome.com/3da1a747b2.js"
      crossorigin="anonymous"
    ></script>
    <title>Bússola Solar</title>
</head>
<body>
    
    <h1>Bússola Solar</h1>
    <hr>

    <form action="index.php" method="POST" onsubmit="return validatePercentage() && checkPrioritize()">

        <h2>Informações Gerais</h2>

        <label for="inputDate">Data:</label>
        <input type="date" id="inputDate">
        <br><br>

        <label for="inputTime">Horário de Preenchimento:</label>
        <input type="time" id="inputTime">
        <br><br>

        <label for="humor">Como o dia está se iniciando?</label>
        <br>
        <input type="radio" id="sol" name="humor" value="sol">
        <label for="sol">Sol</label>
        <br>

        <input type="radio" id="lua" name="humor" value="lua">
        <label for="lua">Lua</label>
        <br><br>

        <label for="cellphoneTime">Tempo de uso do celular:</label>
        <input type="time" id="cellphoneTime" step="1" max="00:23:59">
        <br><br>

        <hr>
        <h2>Informações de Sono</h2>

        <label for="bedTime">Horário que foi dormir:</label>
        <input type="time" id="bedTime">
        <br><br>

        <label for="wakeupTime">Horário que acordou:</label>
        <input type="time" id="wakeupTime">
        <br><br>

        <label for="awakeSleepTime">Tempo <strong>Acordado</strong> durante a noite:</label>
        <input type="range" id="awakePercentage" name="awakePercentage" min="0" max="50" value="0" oninput="awakePercentageOutput.value = awakePercentage.value">
        <output id="awakePercentageOutput">0</output>%
        <br><br>

        <label for="remSleepTime">Tempo de <strong>Sono REM</strong> durante a noite:</label>
        <input type="range" id="remPercentage" name="remPercentage" min="0" max="50" value="0" oninput="remPercentageOutput.value = remPercentage.value">
        <output id="remPercentageOutput">0</output>%
        <br><br>

        <label for="lightSleepTime">Tempo de <strong>Sono Leve</strong> durante a noite:</label>
        <input type="range" id="lightPercentage" name="lightPercentage" min="0" max="100" value="0" oninput="lightPercentageOutput.value = lightPercentage.value">
        <output id="lightPercentageOutput">0</output>%
        <br><br>

        <label for="deepSleepTime">Tempo de <strong>Sono Pesado</strong> durante a noite:</label>
        <input type="range" id="deepPercentage" name="deepPercentage" min="0" max="50" value="0" oninput="deepPercentageOutput.value = deepPercentage.value">
        <output id="deepPercentageOutput">0</output>%
        <br><br>

        <hr>
        <h2>Informações de Peso</h2>

        <label for="burnedCalories">Calorias queimadas no dia anterior:</label>
        <input type="number" id="burnedCalories" value="0" min="0" oninput="burnedCaloriesOutput.value = burnedCalories.value">
        <output id="burnedCaloriesOutput">0</output> cal
        <br><br>

        <label for="totalWeight">Total Weight:</label>
        <input type="number"
               id="totalWeight"
               name="totalWeight"
               min="0"
               max="20000"
               title="Insert four digits for the Total Weight"
               oninput="totalWeightOutput.value = formatNumber(totalWeight.value, 'kg')">
        <div class="weight-output"><output id="totalWeightOutput">__.__ kg</output></div>
        <br>

        <label for="muscleWeight">Muscle Weight:</label>
        <input type="number"
               id="muscleWeight"
               name="muscleWeight"
               min="0"
               max="20000"
               title="Insert four digits for the Muscle Weight"
               oninput="muscleWeightOutput.value = formatNumber(muscleWeight.value, 'kg')">
        <div class="weight-output"><output id="muscleWeightOutput">__.__ kg</output></div>
        <br>

        <label for="fatWeightPercentage">Fat Percentage:</label>
        <input type="number"
               id="fatWeightPercentage"
               name="fatWeightPercentage"
               min="0"
               max="9999"
               title="Insert four digits for the Fat Percentage"
               oninput="fatWeightPercentageOutput.value = formatNumber(fatWeightPercentage.value, '%')">
        <div class="weight-output"><output id="fatWeightPercentageOutput">__.__ %</output></div>
        <br>

        <label for="basalMetabolism">Metabolismo basal aproximado:</label>
        <input type="number" id="basalMetabolism" value="1500" min="0" oninput="basalMetabolismOutput.value = basalMetabolism.value">
        <output id="basalMetabolismOutput">1500</output> cal
        <br><br>

        <hr>
        <h2>Definições de Prioridades</h2>


        <table class="priority">
            <tr>
                <th>Sabedoria</th>
                <th>Estabilidade</th>
                <th>Força</th>
                <th>Gentileza</th>
                <th>Devoção</th>
            </tr>
            <tr>
                <td>
                    <select id="sabedoria" name="sabedoria">
                        <option value="default" selected></option>
                        <option value="sacrificar">Sacrificar</option>
                        <option value="manter">Manter</option>
                        <option value="priorizar">Priorizar</option>
                    </select>
                </td>
                <td>
                    <select id="estabilidade" name="estabilidade">
                        <option value="default" selected></option>
                        <option value="sacrificar">Sacrificar</option>
                        <option value="manter">Manter</option>
                        <option value="priorizar">Priorizar</option>
                    </select>
                </td>
                <td>
                    <select id="forca" name="forca">
                        <option value="default" selected></option>
                        <option value="sacrificar">Sacrificar</option>
                        <option value="manter">Manter</option>
                        <option value="priorizar">Priorizar</option>
                    </select>
                </td>
                <td>
                    <select id="gentileza" name="gentileza">
                        <option value="default" selected></option>
                        <option value="sacrificar">Sacrificar</option>
                        <option value="manter">Manter</option>
                        <option value="priorizar">Priorizar</option>
                    </select>
                </td>
                <td>
                    <select id="devocao" name="devocao">
                        <option value="default" selected></option>
                        <option value="sacrificar">Sacrificar</option>
                        <option value="manter">Manter</option>
                        <option value="priorizar">Priorizar</option>
                    </select>
                </td>
            </tr>    
            <tr>
                <td>
                    <input type="checkbox" id="navegador" name="navegador" value="navegador" data-type="h">
                    <!-- <i class="fas fa-ellipsis-h"></i> -->
                    <label for="navegador">Navegador</label>
                </td>
                <td>
                    <input type="checkbox" id="patrocinador" name="patrocinador" value="patrocinador" data-type="h">
                    <!-- <i class="fas fa-ellipsis-h"></i> -->
                    <label for="patrocinador">Patrocinador</label>
                </td>
                <td>
                    <input type="checkbox" id="vanguarda" name="vanguarda" value="vanguarda" data-type="h">
                    <!-- <i class="fas fa-ellipsis-h"></i> -->
                    <label for="vanguarda">Vanguarda</label>
                </td>
                <td>
                    <input type="checkbox" id="zelador" name="zelador" value="zelador" data-type="h">
                    <!-- <i class="fas fa-ellipsis-h"></i> -->
                    <label for="zelador">Zelador</label>
                </td>
                <td>
                    <input type="checkbox" id="especialista" name="especialista" value="especialista" data-type="h">
                    <!-- <i class="fas fa-ellipsis-h"></i> -->
                    <label for="especialista">Especialista</label>
                </td>
            </tr>
            <tr>
                <td>
                    <input type="checkbox" id="sentinela" name="sentinela" value="sentinela" data-type="v">
                    <!-- <i class="fas fa-ellipsis-v" style="margin: 5px;"></i> -->
                    <label for="sentinela">Sentinela</label>
                </td>
                <td>
                    <input type="checkbox" id="mecenas" name="mecenas" value="mecenas" data-type="h">
                    <!-- <i class="fas fa-ellipsis-h"></i> -->
                    <label for="mecenas">Mecenas</label>
                </td>
                <td>
                    <input type="checkbox" id="batedor" name="batedor" value="batedor" data-type="h">
                    <!-- <i class="fas fa-ellipsis-h"></i> -->
                    <label for="batedor">Batedor</label>
                </td>
                <td>
                    <input type="checkbox" id="coordenador" name="coordenador" value="coordenador" data-type="v">
                    <!-- <i class="fas fa-ellipsis-v" style="margin: 5px;"></i> -->
                    <label for="coordenador">Coordenador</label>
                </td>
                <td>
                    <input type="checkbox" id="guia" name="guia" value="guia" data-type="v">
                    <!-- <i class="fas fa-ellipsis-v" style="margin: 5px;"></i> -->
                    <label for="guia">Guia</label>
                </td>
            </tr>
            <tr>
                <td>
                    <input type="checkbox" id="alquimista" name="alquimista" value="alquimista" data-type="v">
                    <!-- <i class="fas fa-ellipsis-v" style="margin: 5px;"></i> -->
                    <label for="alquimista">Alquimista</label>
                </td>
                <td>
                    <input type="checkbox" id="tesoureiro" name="tesoureiro" value="tesoureiro" data-type="v">
                    <!-- <i class="fas fa-ellipsis-v" style="margin: 5px;"></i> -->
                    <label for="tesoureiro">Tesoureiro</label>
                </td>
                <td>
                    <input type="checkbox" id="cozinheiro" name="cozinheiro" value="cozinheiro" data-type="v">
                    <!-- <i class="fas fa-ellipsis-v" style="margin: 5px;"></i> -->
                    <label for="cozinheiro">Cozinheiro</label>
                </td>
                <td>
                    <input type="checkbox" id="diplomata" name="diplomata" value="diplomata" data-type="v">
                    <!-- <i class="fas fa-ellipsis-v" style="margin: 5px;"></i> -->
                    <label for="diplomata">Diplomata</label>
                </td>
                <td>
                    <input type="checkbox" id="lider" name="lider" value="lider" data-type="c">
                    <!-- <i class="fas fa-th"></i> -->
                    <label for="lider">Líder</label>
                </td>
            </tr>
        </table>


            
        <div style="display: flex;">
            <div style="margin-right: 20px;">
                <h4>Selected Vertical Categories:</h4>
                <ul id="selected-categories-v" class="selected-list"></ul>
            </div>
            <div>
                <h4>Selected Horizontal Categories:</h4>
                <ul id="selected-categories-h" class="selected-list"></ul>
            </div>
        </div>

        <hr>
        <div class="buttonContainer">
            <button class="resetButton" id="reset" style="margin-right: 20px;" type="reset">
                <i class="fas fa-undo"></i>
                Reset
            </button>
            <button class="submitButton" id="submit" type="submit">
                <i class="fas fa-paper-plane"></i>
                Submit
            </button>
        </div>

        <br><br>
        <br><br>
            
    </form>


    <script>

        // Function to update the selected categories
        function updateSelectedCategories() {
            const selectedCategoriesV = document.querySelectorAll('input[type="checkbox"][data-type="v"]:checked');
            const selectedCategoriesH = document.querySelectorAll('input[type="checkbox"][data-type="h"]:checked');
            const selectedListV = document.getElementById('selected-categories-v');
            const selectedListH = document.getElementById('selected-categories-h');
            selectedListV.innerHTML = '';
            selectedListH.innerHTML = '';

            selectedCategoriesV.forEach(category => {
                const label = document.querySelector(`label[for="${category.id}"]`).innerText;
                const listItem = document.createElement('li');
                listItem.textContent = label;
                selectedListV.appendChild(listItem);
            });

            selectedCategoriesH.forEach(category => {
                const label = document.querySelector(`label[for="${category.id}"]`).innerText;
                const listItem = document.createElement('li');
                listItem.textContent = label;
                selectedListH.appendChild(listItem);
            });
        }

        // Add event listener to checkboxes
        const checkboxes = document.querySelectorAll('input[type="checkbox"]');
        checkboxes.forEach(checkbox => {
            checkbox.addEventListener('change', updateSelectedCategories);
        });

        // Function to check if the user has selected exactly one "Priorizar" option
        function checkPrioritize() {
            var dropdowns = document.querySelectorAll('.priority select');
            var prioritizeCount = 0;

            dropdowns.forEach(function(dropdown) {
                if (dropdown.value === "priorizar") {
                    prioritizeCount++;
                }
            });

            if (prioritizeCount !== 1) {
                alert("You must select 'Priorizar' for exactly one attribute");
                return false;
            }

            return true;
        }

        // Function to validate the percentage of total sleep
        function validatePercentage() {
            var awakePercentage = parseInt(document.getElementById("awakePercentage").value);
            var remPercentage   = parseInt(document.getElementById("remPercentage").value);
            var lightPercentage = parseInt(document.getElementById("lightPercentage").value);
            var deepPercentage  = parseInt(document.getElementById("deepPercentage").value);

            var totalPercentage = awakePercentage + remPercentage + lightPercentage + deepPercentage;

            if (totalPercentage !== 100) {
                alert("A soma das porcentagens deve ser igual a 100%");
                return false;
            }

        return true;
        }
       
        // Function to format the number input for weight and percentage
        function formatNumber(value, type) {
            var formatedValue = value / 100;
            if (value.length < 4) {
                var suffix = " (Incomplete Format)";
            }
            else if (type === "kg" && (value.length === 4 || value.length === 5)) {
                var suffix = "";
            }
            else if (type === "%" && value.length === 4) {
                var suffix = "";
            }
            else {
                return "Check the input value and format it correctly.";
            }
            return formatedValue + type + suffix;
        }

    </script>

</body>
</html>
