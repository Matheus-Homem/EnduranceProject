{% extends "base.html" %}

{% block title %}
    [Report] Navegador
{% endblock %}

{% block content %}


<div class="element-box wisdom">
    <div class="element-header">
        <span>Navegador</span>
    </div>
    <div class="element-habit">
        <span>Sobre o hábito da <strong>Leitura</strong></span>
    </div>

    <div class="element-table">

        <form method="get" action="{{ request.path }}">
            <div class="element-row">
                <div class="element-cell cell-100 ">
                    <label for="habit_action">Filtrar por Ação do Hábito:</label>
                </div>
            </div>
            <div class="element-row">
                <div class="element-cell cell-80">
                    <select name="habit_action" class="dropdown">
                        <option value="read">Leitura</option>
                        <option value="notes">Notas</option>
                        <option value="listen">Audiobook</option>
                        {% for action in habit_actions %}
                            <option value="{{ action }}" {% if action == selected_habit_action %}selected{% endif %}>{{ action }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="element-cell cell-20">
                    <button type="submit" class="filterButton">Filtrar</button>
                </div>
            </div>
        </form>

    </div>

    <div class="element-table">

        <div class="element-row">
            <div class="element-cell cell-40 ">
                <span>Livro</span>
            </div>
            <div class="element-cell cell-15 ">
                <span>Total</span>
            </div>
            <div class="element-cell cell-15 ">
                <span>Last</span>
            </div>
            <div class="element-cell cell-15 ">
                <span>Streak</span>
            </div>
            <div class="element-cell cell-15 ">
                <span>Gap</span>
            </div>
        </div>
        
        {% for row in summary_data %}
        <div class="element-row">
            <div class="element-cell cell-40 ">
                <span>{{ row.habit_detail }}</span>
            </div>
            <div class="element-cell cell-15 ">
                <span>{{ row.total }}</span>
            </div>
            <div class="element-cell cell-15 ">
                <span>{{ row.days_since_last }}</span>
            </div>
            <div class="element-cell cell-15 ">
                <span>{{ row.longest_streak }}</span>
            </div>
            <div class="element-cell cell-15 ">
                <span>{{ row.longest_gap }}</span>
            </div>
        </div>
        {% endfor %}

    </div>
</div>

<div class="buttonContainer">
    <button type="button" class="nextButton" id="menu" onclick="window.location.href='/menu/entries/{{ entry_date }}/'">
        <i class="fa-solid fa-bars"></i>
        Menu
    </button>
    <button type="button" class="submitButton" id="submit" onclick="window.location.href='/entries/{{ entry_date }}/wisdom/navigator/'">
        <i class="fa-solid fa-file-pen"></i>
        New Entry
    </button>
    <button type="button" class="nextButton" id="next" onclick="window.location.href='/report/stability/patron/'">
        <i class="fa-solid fa-forward"></i>
        Next
    </button>
</div>

{% endblock %}